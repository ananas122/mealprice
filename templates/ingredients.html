<!DOCTYPE html>
<html>
<head>
  <title>Ingrédients</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Inclure les liens vers les fichiers CSS de la barre latérale et des ingrédients -->
  <link rel="stylesheet" href="static/css/dashboard.css">
  <link rel="stylesheet" href="static/css/ingredients.css">
  
  <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />

</head>
<body>
  <h2>Ingrédients</h2>
  <div class="sidebar">
    <!-- Contenu de la barre latérale depuis dashboard.css -->
  </div>
  <div id="content-container">
    <!-- Contenu de la page Ingrédients -->
    <div class="search-filter">
      <input type="text" id="name" placeholder="Nom">
      <select id="category">
        <option value="">Sélectionnez une catégorie</option>
        <option value="Épices">Épices</option>
        <option value="Légumes">Légumes</option>
        <option value="Fruits">Fruits</option>
        <option value="Autres">Autres</option>
      </select>
      <input type="text" id="supplier" placeholder="Fournisseur">
      <input type="number" id="unit_cost" placeholder="Coût unitaire">
      <input type="number" id="stock_quantity" placeholder="Quantité en stock">
      <button id="addIngredient">Ajouter</button>
      <button id="updateIngredient">Modifier</button>
    </div>
    <div class="sort-filter">
      <label for="sort">Trier par :</label>
      <select id="sort">
        <option value="name">Nom</option>
        <option value="category">Catégorie</option>
      </select>
      <select id="sortOrder">
        <option value="asc">Ordre croissant</option>
        <option value="desc">Ordre décroissant</option>
      </select>
      <button id="sortButton">Trier</button>
    </div>
  <table id="ingredientTable">
    <thead>
      <tr>
        <th>Actions</th>
        <th>Nom</th>
        <th>Catégorie</th>
        <th>Coût unitaire</th>
        <th>Quantité en stock</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
  <div id="contenuImporte"></div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function(){
    // Charger le contenu de dashboard.html
    $("#contenuImporte").load("dashboard.html", function() {
      console.log("Dashboard chargé");

      // Le reste de votre code commence ici
      let editingRow = null;
      const ingredientTable = $("#ingredientTable tbody");
      const categoryFilter = $("#category");
      const sortSelect = $("#sort");
      const sortButton = $("#sortButton");
      const sortOrderSelect = $("#sortOrder");

      // Fonction pour ajouter une nouvelle ligne d'ingrédient
      function addIngredientRow() {
        const newRow = $("<tr>").html(`
          <td><i class="fas fa-edit editIcon"></i> <i class="fas fa-trash-alt deleteIcon"></i></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        `);
        ingredientTable.append(newRow);
        return newRow;
      }

      // Fonction pour mettre à jour une ligne d'ingrédient
      function updateRow(row) {
        const name = $("#name").val();
        const category = $("#category").val();
        const supplier = $("#supplier").val();
        const unit_cost = parseFloat($("#unit_cost").val());
        const stock_quantity = parseInt($("#stock_quantity").val());

        row.find('td').eq(1).text(name);
        row.find('td').eq(2).text(category);
        row.find('td').eq(3).text(supplier);
        row.find('td').eq(4).text(unit_cost);
        row.find('td').eq(5).text(stock_quantity);
      }

      // Gestionnaire d'événement pour le bouton "Ajouter"
      $("#addIngredient").click(function() {
        const newRow = addIngredientRow();
        updateRow(newRow);
      });

      // Gestionnaire d'événement pour le bouton "Trier"
      sortButton.click(function() {
        // Votre code de tri ici
      });

      // Gestionnaire d'événement pour le filtre de catégorie
      categoryFilter.change(function() {
        // Votre code de filtre ici
      });

      // Gestionnaire d'événement pour le bouton "Modifier"
      $("#updateIngredient").click(function() {
        if (editingRow) {
          updateRow(editingRow);
          editingRow = null;
          alert("Ligne mise à jour avec succès !");
        } else {
          alert("Veuillez sélectionner une ligne à modifier en cliquant sur l'icône de modification.");
        }
      });

      // Gestionnaire d'événement pour les icônes d'édition et de suppression
      ingredientTable.on("click", function(event) {
        const target = $(event.target);
        if (target.hasClass("editIcon")) {
          editingRow = target.closest("tr");
          // Votre code d'édition ici
        } else if (target.hasClass("deleteIcon")) {
          editingRow = null;
          target.closest("tr").remove();
        }
      });

    }); // Fin du callback de .load()

  }); // Fin de $(document).ready()
</script>
